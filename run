if [[ $1 == "" ]]; then
	echo Usage $0 prog.asm [out.bin]
	exit 1
fi
A=`realpath $0`
IN=`realpath $1`
OUT=`pwd`/$2
if [[ "$2" == "" ]]
then
	OUT="$OUT"a
fi
cd `dirname "$A"`
python3 mcasm/mcasm.py "$IN" memory && g++ -c OzEmu/main.cpp && g++ main.o -lsfml-graphics -lsfml-window -lsfml-system -lncurses -o "$OUT"&& "$OUT"
rm -rf main.o mcasm/__pycache__
